# QuantantiveSystem
《量化交易之路》代码学习

总结一下，书中最重要的内容其实在第7章和第8章中，主要分为以下这么几个部分。

### 1、第一部分：择时系统开发
在这一部分中，主要高速我们这么几件事情：

    1. 什么时候买入股票，什么时候卖出股票。（择时）
    2. 买入股票时，应该怎么给股票报价；卖出股票时，应该怎么给股票报价。（定价）
    3. 假如我有本金X元，买次买股票，应该花多少钱呢？（仓位控制）

#### 1.1 择时
这一部分，书中主要介绍了《海龟交易法则》中的两种策略：

    1. 趋势跟踪
    2. 均值回归

趋势跟踪：

    基本思路：认为股票在一段时间内的上涨，意味着它在之后也会上涨。
    1. 当第x天收盘后，如果当天的收盘价，高于前k天（不含第x天）的最高价，那么在第x+1天买入。
    2. 当第x天收盘后，如果当天的收盘价，低于前k天（不含第x天）的最低价，那么在第x+1天卖出。
    特点：
    1.导致胜率较低。
    2.每次的盈利高于每次的亏损

均值回归：

    基本思路：认为股票的上涨和下跌是暂时的，股票的票价是围绕一个价值上下波动的
    1. 将历史数据分为以某个时间点分为两部分，前半部分作为训练集，后半部分作为回测集。
    2. 计算训练集收盘价的均值mean，和标准差std。我们以mean+std作为卖出的价格节点，mean-std作为买入的价格节点。
    4. 当价格低于mean-std时，我们就买入股票，并保持持有，直到价格高于mean+std；
    5. 当价格高于mean+std时，我们就卖出股票，保持空仓，直到价格再一次低于mean-std。
    特点：
    1.属于统计套利模型，大机构高频交易可能更加适合。

#### 1.2 定价

这里定价模型采用的是相对简单的方式：

    1.当我在第x天确认，在第x+1天需要买入/卖出时。
    2.我的价格选择为第x天的最高价high，与第x天的最低价low的平均值，即p=(high+low)/2

#### 1.3 仓位控制
保证存活是最重要的！

相比于择时策略是让我们赚更多的钱，仓位控制是让我们在可能亏得时候不至于亏太多。

具体而言，仓位控制，采用的是在股票交易领域修正后的凯利公式：

                    f=Pwin-【Ploss/(收益期望/亏损期望）】

计算出来的f，就是仓位比例，比如我有100w本金，f算出来是0.1，那么我每次买，就应该只买10w。

关于如何计算Pwin，Ploss以及收益期望，亏损期望，会在下一章补上。

### 2、第二部分：选股

不是所有股票都有投资价值的，选股的目的就是从股票中挑选出有价值的股票，来进行投资。

这个其实和代码关系不大，更重要的是策略。

那么对于策略而言，书中介绍的其实就两种：

    1. 基于趋势。
    2. 基于最低最高值。

基于趋势选股：

    1. 当拿到股票的历史数据后，我用直线去拟合这部分数据。
    2. 若拟合直线的斜率为正，表示它的总趋势是上涨，值得买入；相反，则不值得入手。

基于最低最高值选股：

    1. 如果在历史数据中，它的股价一直在某个价格以上，那么值得买入。